<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Internet NIunca mais!</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="title-area">
            <h1 class="game-title">Internet NIunca mais!</h1>
            <div class="title-buttons">
                <button id="howto-btn" class="title-btn">❓ Como jogar</button>
                <a href="https://www.linkedin.com/in/nickolas-selhorst/" class="title-btn" target="_blank" rel="noopener">💼 LinkedIn</a>
            </div>
        </div>
        <div class="header-area">
            <div class="header-block">
                <span class="score-label">Ações tomadas</span>
                <span id="actions-counter">0</span>
            </div>
            <div class="header-block">
                <span class="score-label">Chamados abertos</span>
                <span id="chamados-counter">0</span>
            </div>
            <div class="header-block">
                <span class="score-label">Dias sem internet</span>
                <span id="days-passed">0</span>
            </div>
            <div class="header-block-with-bar">
                <div class="patience-bar-bg">
                    <div id="patience-bar" class="patience-bar"></div>
                </div>
                <span class="score-label">Paciência</span>
                <span id="paciencia">100</span>
            </div>
            <div class="header-block-with-bar">
                <div class="progress-bar-bg">
                    <div id="progress-bar" class="progress-bar" style="width: 0%;"></div>
                </div>
                <span class="score-label">Resolução</span>
                <span id="progress-bar-text">0%</span>
            </div>
            <div class="header-block">
                <span class="score-label">Pontuação</span>
                <span id="current-score">1000</span>
            </div>
        </div>

        <div class="game-area">
            <div class="left-column">
                <div class="left-block modal-block">
                    <div id="log-modal-area" class="modal-area"></div>
                </div>
                <div class="left-block protocol-block">
                    <div class="protocol-list-container">
                        <p class="group-title">Protocolos Registrados</p>
                        <div id="protocol-list" class="protocol-list-area">
                        </div>
                    </div>
                </div>
                <div class="left-block log-block">
                    <p class="group-title">Histórico de ações</p>
                    <div id="log" class="log-area">
                    </div>
                </div>
            </div>

            <div class="right-column">
                <div class="actions-grid">
                    <div class="actions-group" id="n1-actions">
                        <p class="group-title">Nível 1: Abrir Chamado</p>
                        <button id="ligar">📞 Ligar</button>
                        <button id="chamar-wpp">💬 Usar o WPP</button>
                        <button id="abrir-app">📱 Usar o App</button>
                        <button id="enviarEmail">📧 Enviar E-mail</button>
                        <button id="usarAssistenteVirtual">🤖 Chat com IA</button>
                    </div>
                    <div class="actions-group" id="n2-actions">
                        <p class="group-title">Nível 2: Acompanhar Chamado</p>
                        <button id="pegar-status-n2" disabled>🔎 Pegar um Status</button>
                        <button id="receber-tecnico" disabled>👨🏼‍🔧 Receber o Técnico</button>
                        <button id="receberLigacao" disabled>☎️ Atender Ligação</button>
                        <button id="reclamarRedeSocial" disabled>📲 Reclamar na rede social</button>
                    </div>
                    <div class="actions-group" id="n3-actions">
                        <p class="group-title">Nível 3: Escalar (Paciência <60)</p>
                        <button id="anatel" disabled>📡 ANATEL</button>
                        <button id="procon" disabled>📇 Procon</button>
                        <button id="ligarOuvidoria" disabled>📞 Ouvidoria</button>
                        <button id="reclame-aqui" disabled>📋 Reclame Aqui</button>
                        <button id="consumidor-gov" disabled>🗄 Consumidor.gov</button>
                        <button id="acaoJudicial" disabled>⚖️ Ação Judicial</button>
                    </div>
                    <div class="actions-group" id="n4-actions">
                        <p class="group-title">Tentar a sorte (2x por ação)</p>
                        <button id="arrumarSozinho">🔧 Arrumar sozinho</button>
                        <button id="vizinhoWifi">📶 Pedir Wi-Fi ao Vizinho</button>
                        <button id="videoTikTok">📱 Postar no TikTok</button>
                        <button id="mensagemCEO">💼 Postar no LinkedIn</button>
                        <button id="CelsoRussomanno">🕵🏻 Celso Russomanno</button>
                    </div>
                </div>
                 <div class="actions-footer">
                    <button id="esperar" title="Este botão fica ativo quando há protocolo do Nível 3 aguardando prazo">Esperar 1 dia</button>
                    <button id="cancelar-plano" title="Está sem paciência e quer cancelar? Clica aqui e tenta a sorte.">Cancelar o plano</button>
                    <button id="restart-game" style="display:none;">Sofrer novamente</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="cancellation-modal" class="modal">
        <div class="modal-content">
            <p id="modal-message"></p>
            <div class="modal-buttons">
                <button id="modal-accept">Aceitar</button>
                <button id="modal-reject">Rejeitar</button>
            </div>
        </div>
    </div>
    <div id="intro-modal" class="modal" style="display: flex;">
        <div class="modal-content">
            <h2>Bem-vindo ao Internet NIunca mais!</h2>
            <p>O <b>Internet NIunca mais!</b> é a sua chance de se estressar com essa operadora que vai testar sua <b>paciência</b>.  
                Enfrente o desafio de tentar resolver seu problema de internet e se arrependa do dia em que se tornou um cliente.</p> 
            <p>A sua jornada de paciência começa agora!</p>
            <div class="modal-buttons">
                <button id="intro-howto">❓ Como jogar</button>
                <button id="intro-start">✅ Começar</button>
            </div>
        </div>
    </div>
    <div id="gameover-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <h2>Game Over 😫</h2>
            <p id="gameover-message">Sua paciência acabou! Você NIão aguenta mais tentar resolver o problema e decide viver sem internet, 
                pois no fim, NIem vale a pena.</p>
            <div class="modal-buttons">
                <button id="gameover-restart">😫 Sofrer novamente </button>
                <button id="gameover-close">❌Fechar</button>
            </div>
        </div>
    </div>

    <!-- How to Play Modal -->
    <div id="howto-modal" class="howto-modal">
        <div class="howto-modal-content">
            <div class="howto-body">
                <h2>🎮 Como Jogar - Internet NIunca mais!</h2>
                
                <div class="howto-grid">
                    <div class="howto-section">
                        <h3>📋 Objetivo</h3>
                        <p>Sua internet não funciona! Use as ações disponíveis para tentar resolver o problema antes que sua paciência acabe.</p>
                        
                        <h3>🎲 Sistema de Probabilidade</h3>
                        <ul>
                            <li><strong>50%</strong> chance positiva/negativa por ação</li>
                            <li><strong>5%</strong> chance de eventos aleatórios</li>
                            <li><span style="color: #28a745;">Positivos</span> aumentam progresso</li>
                            <li><span style="color: #dc3545;">Negativos</span> diminuem paciência</li>
                        </ul>
                    </div>
                    
                    <div class="howto-section">
                        <h3>🔢 Níveis de Ação</h3>
                        <ul>
                            <li><strong>Nível 1:</strong> Abrir chamado</li>
                            <li><strong>Nível 2:</strong> Acompanhar chamado</li>
                            <li><strong>Nível 3:</strong> Escalar (paciência <60)</li>
                            <li><strong>Nível 4:</strong> Tentar a sorte (2x máximo)</li>
                        </ul>
                        
                        <h3>⚖️ Protocolos N3</h3>
                        <ul>
                            <li>Uso único por jogo se abrir protocolo</li>
                            <li>Prazos específicos para aguardar</li>
                            <li>Ação bloqueada após encerramento</li>
                        </ul>
                    </div>
                    
                    <div class="howto-section">
                        <h3>🎯 Vitória/Derrota</h3>
                        <ul>
                            <li><strong>Vitória:</strong> 100% de progresso</li>
                            <li><strong>Derrota:</strong> Paciência = 0</li>
                            <li><strong>Alternativa:</strong> "Cancelar plano"</li>
                        </ul>
                        
                        <h3>🏆 Sistema de Pontuação</h3>
                        <ul>
                            <li><strong>Base:</strong> 1000 pontos</li>
                            <li><strong>Dias:</strong> -5 pontos cada</li>
                            <li><strong>Ações:</strong> -1 ponto cada</li>
                            <li><strong>Protocolos:</strong> -8 pontos cada</li>
                            <li><strong>Paciência:</strong> +3 pontos cada</li>
                            <li><strong>Bônus velocidade:</strong> até +200</li>
                            <li><strong>Bônus eficiência:</strong> até +100</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="howto-footer">
                <button class="howto-close" id="howto-close">Entendi, vamos jogar!</button>
            </div>
        </div>
    </div>

    <!-- Victory Modal with Ranking -->
    <div id="victory-modal" class="modal" style="display:none;">
        <div class="modal-content victory-content">
            <h2>🎉 MILAGRE! Você conseguiu resolver!</h2>
            <div class="victory-stats">
                <div class="stat-item">
                    <span class="stat-label">📅 Dias sem internet:</span>
                    <span id="victory-days">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">🎯 Ações tomadas:</span>
                    <span id="victory-actions">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">📋 Protocolos abertos:</span>
                    <span id="victory-protocols">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">😌 Paciência restante:</span>
                    <span id="victory-patience">0</span>
                </div>
            </div>
            
            <div class="score-display">
                <h3>Sua Pontuação Final</h3>
                <div class="final-score">
                    <span id="final-score">0</span> pontos
                </div>
                <div class="score-breakdown" id="score-breakdown">
                    <!-- Será preenchido via JavaScript -->
                </div>
            </div>
            
            <div class="ranking-submit">
                <h4>🏆 Salvar no Ranking Global</h4>
                <input type="text" id="player-name" placeholder="Digite seu nome (máx. 20 caracteres)" maxlength="20">
                <div class="ranking-buttons">
                    <button id="submit-score" class="btn-primary">Salvar Pontuação</button>
                    <button id="skip-ranking" class="btn-secondary">Pular</button>
                </div>
                <div id="ranking-status" class="ranking-status"></div>
            </div>
            
            <div class="victory-actions">
                <button id="view-rankings" class="btn-ranking">Ver Ranking Global</button>
                <button id="victory-restart" class="btn-restart">Jogar Novamente</button>
            </div>
        </div>
    </div>

    <!-- Ranking Modal -->
    <div id="ranking-modal" class="modal" style="display:none;">
        <div class="modal-content ranking-content">
            <div class="ranking-header">
                <h2>🏆 Ranking Global - Internet NIunca mais!</h2>
                <button id="ranking-close" class="close-btn">×</button>
            </div>
            
            <div class="ranking-stats" id="global-stats">
                <div class="stat-card">
                    <span class="stat-number" id="total-games">-</span>
                    <span class="stat-label">Jogos Totais</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="avg-score">-</span>
                    <span class="stat-label">Pontuação Média</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="top-score">-</span>
                    <span class="stat-label">Recorde</span>
                </div>
            </div>
            
            <div class="ranking-list-container">
                <div class="ranking-list" id="ranking-list">
                    <div class="loading">Carregando rankings...</div>
                </div>
            </div>
            
            <div class="ranking-footer">
                <button id="refresh-rankings" class="btn-secondary">🔄 Atualizar</button>
                <button id="close-rankings" class="btn-primary">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    
    <!-- Scripts do jogo -->
    <script src="ranking.js"></script>
    <script src="messages.js"></script>
    <script src="script.js"></script>
</body>
</html>